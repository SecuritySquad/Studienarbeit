window.heiseLogin===undefined&&typeof jQuery!="undefined"&&function(e){function r(t,n,r,i){var s,o="",u="?";return n.match(/\?/)&&(u="&"),r&&(o=u+e.param(r)),t.children().length>0?t.append(" | "):location.pathname.match(/^\/download/)||t.prepend('<span class="heise_foren">Heise-Foren:</span> '),s=e('<a href="'+n+o+'">'+i+"</a>"),t.append(s),s}function i(t){var n,r=e(window).scrollTop(),i=r+e(window).height(),s=e(t).offset().top,o=s+e(t).height();o>=r&&s<=i&&o<=i&&s>=r||(e(t).height()<e(window).height()?n=e(window).height()-e(t).height()-(e(window).height()-s):n=s,e("html, body").animate({scrollTop:n},500))}function s(o){var u,a,f,l,c,h=e("#navi_login p");if(!h)return;if(location.hostname.match(/abo\.heise\.de/)||location.hostname.match(/printshop\.heise\.de/)||location.hostname.match(/tarifrechner\.heise\.de/)||location.hostname.match(/webcasts\.heise\.de/)||location.hostname.match(/shop\.heise\.de/)||location.hostname.match(/www\.heise-shop\.de/)||location.hostname.match(/jobs\.heise\.de/))return;o||(o={}),u={},o.forward?u.forward=o.forward:u.forward=location.href,h.empty(),t.extra_js&&!t.extra_js_added&&(e(t.extra_js).each(function(t,n){e("head").first().append('<script type="text/javascript" src="'+n+'"></script>')}),t.extra_js_added=1),t.sso_logged_in||t.logged_in?(r(h,t.urls.logout,e.extend({forward:o.logout_forward||location.href},u),"Ausloggen"),r(h,t.urls.profil,e.extend({forward:location.href},u),"Mein Account"),t.cookie_checked||(t.cookie_checked=1)):(l=r(h,t.urls.sso,u,"Einloggen"),r(h,t.urls.register,u,"Registrieren"),location.pathname.match(/^\/sso\/login/)!==null&&e(l).click(function(t){var n=e("#login-form")[0];t.preventDefault(),n&&i(n)})),t.not_first_run||(t.not_first_run=1,c=n+"/sso/login/urls",e.ajax({url:c,data:{},success:function(e){var n;e.urls&&(t.urls=e.urls),e.logged_in!==undefined&&(t.logged_in=e.logged_in),e.sso_logged_in!==undefined&&(t.sso_logged_in=e.sso_logged_in),e.session_id!==undefined&&(t.session_id=e.session_id),e.user_id!==undefined&&(t.user_id=e.user_id),e.extra_js!==undefined&&(t.extra_js=e.extra_js),s();for(n=0;n<t.change_handlers.length;n++)t.change_handlers[n].call(undefined);try{localStorage.setItem("heiseLogin",JSON.stringify({logged_in:t.logged_in,sso_logged_in:t.sso_logged_in}))}catch(r){}},xhrFields:{withCredentials:!0}}))}var t,n="";location.hostname.match(/(www\.heise\.de|www\.techstage\.de)/)&&(n="https://"+location.hostname),"use strict",t={logged_in:null,sso_logged_in:null,urls:function(){var e={sso:n+"/userdb/sso",logout:n+"/userdb/sso?rm=do_logout",register:n+"/userdb/register?rm=show_registration",profil:n+"/userdb/register?rm=show_userdata"};return e.sso=n+"/sso/login/",e.logout=n+"/sso/login/logout",e.register=n+"/sso/registration/",e.ho_login=n+"/sso/login/",e.ho_register=n+"/sso/registration/",e}(),session_id:null,user_id:null,extra_js:null},window.heiseLogin=t,t.updateLoginStatus=function(){var e;window.heiseLogin.logged_in=!1,window.heiseLogin.sso_logged_in=!1;try{e=JSON.parse(localStorage.getItem("heiseLogin")||"{}"),window.heiseLogin.logged_in=e.logged_in?!0:!1,window.heiseLogin.sso_logged_in=e.sso_logged_in?!0:!1}catch(t){}},t.login_fill_navigation=function(e){t.updateLoginStatus(),s(e)},t.change_handlers=[],t.on_login_change=function(e){t.change_handlers.push(e)},window.heiseLogin.updateLoginStatus()}(jQuery);